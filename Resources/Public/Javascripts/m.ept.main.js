(function(e){initializeCollapse();e("#product-select-division").on("change",function(){resetDC("#product-select-category, #product-select-product",false);if(this.value!=0){ajaxRequest("getProductCategoriesByProductDivision",{division:this.value},function(t){if(t.length){var o=e("#product-select-category");o.removeAttr("disabled");for(var c in t){o.append('<option value="'+t[c].uid+'">'+t[c].title+"</option>")}}else{e("#product-select-info").hide();e("#product-data").html('<p class="alert alert-info"><i class="fa fa-info-circle fa-fw fa-lg"></i> '+noCatMsg+"</p>")}},"json",1425988258)}});e("#product-select-category").on("change",function(){resetDC("#product-select-product",true);if(this.value!=0){ajaxRequest("getProductsByProductCategory",{category:this.value,discontinued:e("#product-select-discontinued:checked").val()==1},function(t){if(t.length){var o=e("#product-select-product");o.removeAttr("disabled");for(var c in t){o.append('<option value="'+t[c].uid+'">'+t[c].title+"</option>")}}else{e("#product-select-info").hide();e("#product-data").html('<p class="alert alert-info"><i class="fa fa-info-circle fa-fw fa-lg"></i> '+noProdMsg+"</p>")}},"json",1425988258)}});e("#product-select-product").on("change",function(){e("#product-data").html("");if(this.value!=0){ajaxRequest("getProductData",{product:this.value},function(t){e("#product-data").html(t);initializeCollapse();e("#ecomproducttools-accordion").collapse();e("#product-select-info").hide()},"html",1425988257)}});e("#product-select-discontinued").on("change",function(){resetDC("#product-select-product",true);var t=e("#product-select-category");if(t.val()!=0){ajaxRequest("getProductsByProductCategory",{category:t.val(),discontinued:this.checked},function(t){if(t.length){var o=e("#product-select-product");o.removeAttr("disabled");for(var c in t){o.append('<option value="'+t[c].uid+'">'+t[c].title+"</option>")}}},"json",1425988258)}else{resetDC("#product-select-product",true)}});resetDC("#product-select-category, #product-select-product",false);e("#product-select-division").val(0)})(jQuery);function ajaxRequest(e,t,o,c,i){$("#ecom-product-tools-ajax-indicator").css("display","inline-block");$.ajax({async:"true",url:"index.php",type:"POST",dataType:c.length?c:"json",data:{eID:"EcomProductTools",id:parseInt(pid),L:parseInt(langUid),type:parseInt(i),request:{controllerName:c=="json"?"JsonRequest":"AjaxRequest",actionName:e,arguments:t}},success:o,complete:function(){$("#ecom-product-tools-ajax-indicator").hide()},error:function(e,t,o){console.log("Request failed with "+t+": "+o+"!")}})}function resetDC(e,t){$(e).attr("disabled","disabled");$(e).find("option:not(:eq(0))").remove();$("#product-select-info").show();if(t){$("#product-select-discontinued").removeAttr("disabled");$("#checkbox-discontinued").removeClass("disabled")}else{$("#product-select-discontinued").attr("disabled","disabled").attr("checked",false);$("#checkbox-discontinued").addClass("disabled")}$("#product-data").html("")}function initializeCollapse(){$(".panel-title").each(function(e){if(e>0){$(this).addClass("collapsed")}});$(".collapse.in").each(function(e){if(e>0){$(this).removeClass("in")}})}